

<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
  <title>A Report Generated by knitr</title>
</head>
<body>

  <p>This report is automatically generated with the R
    package <a href="http://yihui.name/knitr"><strong>knitr</strong></a>
    (version <code class="knitr inline">1.5</code>)
    .</p>

<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Chapter 9 Controlling the Logical Flow Making Choices with if Statements</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl kwd">round</span><span class="hl std">(net.price)</span>
<span class="hl std">}</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl kwa">if</span> <span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">) {</span>
        <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">0.9</span>
    <span class="hl std">}</span>
    <span class="hl kwd">round</span><span class="hl std">(net.price)</span>
<span class="hl std">}</span>
<span class="hl kwd">priceCalculator</span><span class="hl std">(</span><span class="hl kwc">hours</span> <span class="hl std">=</span> <span class="hl num">55</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2200
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">priceCalculator</span><span class="hl std">(</span><span class="hl kwc">hours</span> <span class="hl std">=</span> <span class="hl num">110</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 3960
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl kwa">if</span> <span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">)</span>
        <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">0.9</span>
    <span class="hl kwd">round</span><span class="hl std">(net.price)</span>
<span class="hl std">}</span>
<span class="hl kwd">`?`</span><span class="hl std">(</span><span class="hl str">&quot;if&quot;</span><span class="hl std">)</span>
<span class="hl kwd">`?`</span><span class="hl std">(</span><span class="hl str">&quot;if&quot;</span><span class="hl std">)</span>
<span class="hl kwd">`?`</span><span class="hl std">(`if`)</span>
<span class="hl com">## Doing Something Else with an if...else Statement</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl kwa">if</span> <span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">)</span>
        <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">0.9</span>
    <span class="hl kwa">if</span> <span class="hl std">(public) {</span>
        <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">1.06</span>
    <span class="hl std">}</span> <span class="hl kwa">else</span> <span class="hl std">{</span>
        <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">1.12</span>
    <span class="hl std">}</span>
    <span class="hl kwd">round</span><span class="hl std">(tot.price)</span>
<span class="hl std">}</span>
<span class="hl kwd">priceCalculator</span><span class="hl std">(</span><span class="hl num">25</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1060
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">priceCalculator</span><span class="hl std">(</span><span class="hl num">25</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1120
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl kwa">if</span> <span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">)</span>
        <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">0.9</span>
    <span class="hl kwa">if</span> <span class="hl std">(public)</span>
        <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">1.06</span> <span class="hl kwa">else</span> <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">1.12</span>
    <span class="hl kwd">round</span><span class="hl std">(tot.price)</span>
<span class="hl std">}</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl kwa">if</span> <span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">)</span>
        <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl num">0.9</span>
    <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl kwa">if</span> <span class="hl std">(public)</span>
        <span class="hl num">1.06</span> <span class="hl kwa">else</span> <span class="hl num">1.12</span>
    <span class="hl kwd">round</span><span class="hl std">(tot.price)</span>
<span class="hl std">}</span>
<span class="hl com"># Vectorizing Choices Looking at the problem</span>
<span class="hl kwd">priceCalculator</span><span class="hl std">(</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">25</span><span class="hl std">,</span> <span class="hl num">110</span><span class="hl std">))</span>
</pre></div>
<div class="warning"><pre class="knitr r">## Warning: the condition has length > 1 and only the first element will be used
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1060 4664
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">priceCalculator</span><span class="hl std">(</span><span class="hl num">110</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 4198
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">25</span><span class="hl std">,</span> <span class="hl num">110</span><span class="hl std">)</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] FALSE  TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Choosing based on a logical vector Understanding how it works</span>
<span class="hl kwd">ifelse</span><span class="hl std">(</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">3</span><span class="hl std">)</span> <span class="hl opt">&lt;</span> <span class="hl num">2.5</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">2</span><span class="hl std">,</span> <span class="hl num">3</span><span class="hl opt">:</span><span class="hl num">4</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1 4
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Trying it out</span>
<span class="hl std">my.hours</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">25</span><span class="hl std">,</span> <span class="hl num">110</span><span class="hl std">)</span>
<span class="hl std">my.hours</span> <span class="hl opt">*</span> <span class="hl num">40</span> <span class="hl opt">*</span> <span class="hl kwd">ifelse</span><span class="hl std">(my.hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl num">0.9</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1000 3960
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Adapting the function</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">,</span> <span class="hl kwc">public</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl kwd">ifelse</span><span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl num">0.9</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl kwd">ifelse</span><span class="hl std">(public,</span> <span class="hl num">1.06</span><span class="hl std">,</span> <span class="hl num">1.12</span><span class="hl std">)</span>
    <span class="hl kwd">round</span><span class="hl std">(tot.price)</span>
<span class="hl std">}</span>
<span class="hl std">clients</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">data.frame</span><span class="hl std">(</span><span class="hl kwc">hours</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">25</span><span class="hl std">,</span> <span class="hl num">110</span><span class="hl std">,</span> <span class="hl num">125</span><span class="hl std">,</span> <span class="hl num">40</span><span class="hl std">),</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl num">TRUE</span><span class="hl std">,</span> <span class="hl num">FALSE</span><span class="hl std">,</span> <span class="hl num">FALSE</span><span class="hl std">))</span>
<span class="hl kwd">with</span><span class="hl std">(clients,</span> <span class="hl kwd">priceCalculator</span><span class="hl std">(hours,</span> <span class="hl kwc">public</span> <span class="hl std">= public))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1060 4198 5040 1792
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Making Multiple Choices Chaining if...else statements Code example # NOT run</span>
<span class="hl com"># if(client=='private'){ tot.price &lt;- net.price * 1.12 # 12% VAT } else {</span>
<span class="hl com"># if(client=='public'){ tot.price &lt;- net.price * 1.06 # 6% VAT } else { tot.price &lt;-</span>
<span class="hl com"># net.price * 1 # 0% VAT } } Code example # NOT run if(client=='private'){ tot.price &lt;-</span>
<span class="hl com"># net.price * 1.12 } else if(client=='public'){ tot.price &lt;- net.price * 1.06 } else {</span>
<span class="hl com"># tot.price &lt;- net.price } Code example # NOT run VAT &lt;- ifelse(client=='private', 1.12,</span>
<span class="hl com"># ifelse(client == 'public', 1.06, 1) ) tot.price &lt;- net.price * VAT Switching between</span>
<span class="hl com"># possibilities Making choices with switch Code example # NOT run VAT &lt;- switch(client,</span>
<span class="hl com"># private=1.12, public=1.06, abroad=1) Using default values in switch Code example # NOT</span>
<span class="hl com"># run VAT &lt;- switch(client, private=1.12, public=1.06, 1)</span>
<span class="hl std">client</span> <span class="hl kwb">&lt;-</span> <span class="hl str">&quot;other&quot;</span>
<span class="hl kwd">switch</span><span class="hl std">(client,</span> <span class="hl kwc">private</span> <span class="hl std">=</span> <span class="hl num">1.12</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">1.06</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Looping Through Values Constructing a for loop Calculating values in a for loop Using the</span>
<span class="hl com"># values of the vector</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">,</span> <span class="hl kwc">client</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span> <span class="hl opt">*</span> <span class="hl kwd">ifelse</span><span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl num">0.9</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl std">VAT</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">numeric</span><span class="hl std">(</span><span class="hl num">0</span><span class="hl std">)</span>
    <span class="hl kwa">for</span> <span class="hl std">(i</span> <span class="hl kwa">in</span> <span class="hl std">client) {</span>
        <span class="hl std">VAT</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(VAT,</span> <span class="hl kwd">switch</span><span class="hl std">(i,</span> <span class="hl kwc">private</span> <span class="hl std">=</span> <span class="hl num">1.12</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">1.06</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">))</span>
    <span class="hl std">}</span>
    <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl std">VAT</span>
    <span class="hl kwd">round</span><span class="hl std">(tot.price)</span>
<span class="hl std">}</span>
<span class="hl std">clients</span><span class="hl opt">$</span><span class="hl std">type</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;public&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;abroad&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;private&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;abroad&quot;</span><span class="hl std">)</span>
<span class="hl kwd">priceCalculator</span><span class="hl std">(clients</span><span class="hl opt">$</span><span class="hl std">hours,</span> <span class="hl kwc">client</span> <span class="hl std">= clients</span><span class="hl opt">$</span><span class="hl std">type)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1060 3960 5040 1600
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Using loops and indices</span>
<span class="hl std">nclient</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">length</span><span class="hl std">(client)</span>
<span class="hl std">VAT</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">numeric</span><span class="hl std">(nclient)</span>
<span class="hl kwa">for</span> <span class="hl std">(i</span> <span class="hl kwa">in</span> <span class="hl kwd">seq_along</span><span class="hl std">(client)) {</span>
    <span class="hl std">VAT[i]</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">switch</span><span class="hl std">(client[i],</span> <span class="hl kwc">private</span> <span class="hl std">=</span> <span class="hl num">1.12</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">1.06</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl std">VAT</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Looping without Loops: Meeting the Apply Family</span>
<span class="hl std">songline</span> <span class="hl kwb">&lt;-</span> <span class="hl str">&quot;Get out of my dreams...&quot;</span>
<span class="hl kwa">for</span> <span class="hl std">(songline</span> <span class="hl kwa">in</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">5</span><span class="hl std">)</span> <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;...Get into my car!&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "...Get into my car!"
## [1] "...Get into my car!"
## [1] "...Get into my car!"
## [1] "...Get into my car!"
## [1] "...Get into my car!"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">songline</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 5
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Looking at the family features Meeting three of the members Applying functions on rows</span>
<span class="hl com">## and columns Counting birds</span>
<span class="hl std">counts</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">matrix</span><span class="hl std">(</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">3</span><span class="hl std">,</span> <span class="hl num">2</span><span class="hl std">,</span> <span class="hl num">4</span><span class="hl std">,</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl num">5</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">8</span><span class="hl std">,</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">),</span> <span class="hl kwc">ncol</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">)</span>
<span class="hl kwd">colnames</span><span class="hl std">(counts)</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;sparrow&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;dove&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;crow&quot;</span><span class="hl std">)</span>
<span class="hl std">counts</span>
</pre></div>
<div class="output"><pre class="knitr r">##      sparrow dove crow
## [1,]       3    6    8
## [2,]       2    5    6
## [3,]       4    1    1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">apply</span><span class="hl std">(counts,</span> <span class="hl num">2</span><span class="hl std">, max)</span>
</pre></div>
<div class="output"><pre class="knitr r">## sparrow    dove    crow 
##       4       6       8
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Adding extra arguments</span>
<span class="hl std">counts[</span><span class="hl num">2</span><span class="hl std">,</span> <span class="hl num">2</span><span class="hl std">]</span> <span class="hl kwb">&lt;-</span> <span class="hl num">NA</span>
<span class="hl kwd">apply</span><span class="hl std">(counts,</span> <span class="hl num">2</span><span class="hl std">, max)</span>
</pre></div>
<div class="output"><pre class="knitr r">## sparrow    dove    crow 
##       4      NA       8
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">apply</span><span class="hl std">(counts,</span> <span class="hl num">2</span><span class="hl std">, max,</span> <span class="hl kwc">na.rm</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## sparrow    dove    crow 
##       4       6       8
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Applying functions to listlike objects Applying a function to a vector Using switch on</span>
<span class="hl com">## vectors</span>
<span class="hl kwd">sapply</span><span class="hl std">(</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;a&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;b&quot;</span><span class="hl std">), switch,</span> <span class="hl kwc">a</span> <span class="hl std">=</span> <span class="hl str">&quot;Hello&quot;</span><span class="hl std">,</span> <span class="hl kwc">b</span> <span class="hl std">=</span> <span class="hl str">&quot;Goodbye&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##         a         b 
##   "Hello" "Goodbye"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">#### Replacing a complete for loop with a single statement</span>
<span class="hl std">priceCalculator</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">hours</span><span class="hl std">,</span> <span class="hl kwc">pph</span> <span class="hl std">=</span> <span class="hl num">40</span><span class="hl std">,</span> <span class="hl kwc">client</span><span class="hl std">) {</span>
    <span class="hl std">net.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">hours</span> <span class="hl opt">*</span> <span class="hl std">pph</span> <span class="hl opt">*</span> <span class="hl kwd">ifelse</span><span class="hl std">(hours</span> <span class="hl opt">&gt;</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl num">0.9</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl std">VAT</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">sapply</span><span class="hl std">(client, switch,</span> <span class="hl kwc">private</span> <span class="hl std">=</span> <span class="hl num">1.12</span><span class="hl std">,</span> <span class="hl kwc">public</span> <span class="hl std">=</span> <span class="hl num">1.06</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl std">tot.price</span> <span class="hl kwb">&lt;-</span> <span class="hl std">net.price</span> <span class="hl opt">*</span> <span class="hl std">VAT</span>
    <span class="hl kwd">round</span><span class="hl std">(tot.price)</span>
<span class="hl std">}</span>
<span class="hl com">### Applying a function to a data frame</span>
<span class="hl kwd">sapply</span><span class="hl std">(clients, class)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       hours      public        type 
##   "numeric"   "logical" "character"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Simplifying results (or not) with sapply</span>
<span class="hl kwd">sapply</span><span class="hl std">(clients, unique)</span>
</pre></div>
<div class="output"><pre class="knitr r">## $hours
## [1]  25 110 125  40
## 
## $public
## [1]  TRUE FALSE
## 
## $type
## [1] "public"  "abroad"  "private"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Getting lists using lapply</span>
<span class="hl kwd">sapply</span><span class="hl std">(clients[</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">3</span><span class="hl std">), ], unique)</span>
</pre></div>
<div class="output"><pre class="knitr r">##      hours public  type     
## [1,] "25"  "TRUE"  "public" 
## [2,] "125" "FALSE" "private"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">lapply</span><span class="hl std">(clients[</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">3</span><span class="hl std">), ], unique)</span>
</pre></div>
<div class="output"><pre class="knitr r">## $hours
## [1]  25 125
## 
## $public
## [1]  TRUE FALSE
## 
## $type
## [1] "public"  "private"
</pre></div>
</div></div>


  <p>The R session information (including the OS info, R version and all
    packages used):</p>

<div class="chunk" id="session-info"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 3.0.2 (2013-09-25)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## 
## locale:
## [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252   
## [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                           
## [5] LC_TIME=English_United Kingdom.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] BiocInstaller_1.12.1 ggplot2_0.9.3.1      reshape2_1.2.2       sos_1.3-8           
##  [5] brew_1.0-6           stringr_0.6.2        knitr_1.5            plyr_1.8            
##  [9] Revobase_7.1.0       RevoMods_7.1.0       RevoScaleR_7.1.0     lattice_0.20-27     
## [13] rpart_4.1-2         
## 
## loaded via a namespace (and not attached):
##  [1] codetools_0.2-8    colorspace_1.2-4   dichromat_2.0-0    digest_0.6.4      
##  [5] evaluate_0.5.1     foreach_1.4.1      formatR_0.10       fortunes_1.5-2    
##  [9] grid_3.0.2         gtable_0.1.2       highr_0.3          iterators_1.0.6   
## [13] labeling_0.2       MASS_7.3-29        munsell_0.4.2      proto_0.3-10      
## [17] RColorBrewer_1.0-5 scales_0.2.3       tools_3.0.2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">Sys.time</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "2014-05-13 15:05:45 BST"
</pre></div>
</div></div>




</body>
</html>
